(this["webpackJsonpplay-our-song"]=this["webpackJsonpplay-our-song"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=(a(81),a(12)),s=a(28),l=r.a.createContext(),u=a(141),p=a(145),d=a(147),m=a(146),f=a(31),h=a(64),b=a.n(h),g=function(e){var t=e.track,a=M();return r.a.createElement(u.a,null,r.a.createElement(p.a,{primary:t.name,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{component:"span",variant:"body2",color:"textPrimary"},t.artists[0].name,"   \u2022"),"\u2022   ",t.album.name)}),r.a.createElement(m.a,null,r.a.createElement(d.a,{className:a.button,"aria-label":"Give a thumb up",onClick:function(){}},r.a.createElement(b.a,null))))},y=a(148),v=function(e){var t=e.tracks,a=M();return r.a.createElement(y.a,{className:a.playList},t.map((function(e){return r.a.createElement(g,{track:e,key:e.id})})))},j=a(149),O=a(150),E=a(65),k=a.n(E),w=a(66),x=a.n(w),S=a(151),C=["user-read-currently-playing","user-read-playback-state","playlist-modify-public","playlist-modify-private"],T=function(e){var t=e.token,a=e.profilePic,n=(e.username,M()),o=r.a.useContext(l);return r.a.createElement("div",{className:n.root},r.a.createElement(j.a,{position:"static"},r.a.createElement(O.a,null,r.a.createElement(d.a,{edge:"start",color:"inherit"},r.a.createElement(k.a,{fontSize:"large"})),r.a.createElement(f.a,{className:n.title,variant:"h6"},"PlayOurSong"),r.a.createElement("div",{className:n.grow}),r.a.createElement(S.a,{"data-testid":"title","data-cy":"title",variant:"contained",color:"primary",onClick:function(){return o?o.open[1](!0):null}},o?o.open[0]?"Untitled Playlist":o.playlistTitle[0]:""),r.a.createElement("div",{className:n.grow}),!t&&r.a.createElement(d.a,{href:"".concat("https://accounts.spotify.com/authorize?","client_id=").concat("690c30f6add5454c8a5660405b6b228c","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(C.join("%20"),"&response_type=token&show_dialog=true"),edge:"end","aria-label":"account of current user",color:"inherit"},r.a.createElement(x.a,{fontSize:"small"})),t&&r.a.createElement("div",null,r.a.createElement(m.a,{alt:"Remy Sharp",src:a,className:n.avatar})))))},P=a(15),N=a.n(P),B=a(30),I=a(161),z=a(164),G=a(158),A=a(156),R=a(157),U=a(155),W=a(152),_=a(153),F=a(154),D=a(163);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var K=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),u=Object(i.a)(c,2),p=u[0],d=u[1],m=M(),f=r.a.useContext(l);Object(n.useEffect)((function(){(function(){var e=Object(B.a)(N.a.mark((function e(){var t,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/Event2Genre.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),r=Object.keys(n),d(r),r.forEach((function(e){a[e]=!1})),o(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var h=function(e){return function(t){var n=f.playlistEvents[0];-1===n.indexOf(e)?n.push(e):n=n.filter((function(t){return t!==e})),f.playlistEvents[1](n),console.log("handleChange - eventName",e),console.log("handleChange - selectedPlaylistEvents",n),console.log("handleChange - event.target.checked",t.target.checked),o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,Object(s.a)({},e,t.target.checked)))}};return r.a.createElement("div",{className:m.root},r.a.createElement(W.a,{component:"fieldset",className:m.formControl},r.a.createElement(_.a,null,p.map((function(e){return r.a.createElement(F.a,{control:r.a.createElement(D.a,{"data-testid":"checkBox_".concat(e),checked:a[e],onChange:h(e),value:e}),label:e.toUpperCase()})})))))};new(a(87))({clientId:"b1bcbd4ae171494db0dbd3a736535946",clientSecret:"27127362e5174286a15516cc33a96998",redirectUri:"http://www.example.com/callback"}).setAccessToken("BQBNXuIYqvAnjRf88UtATB6hNBydlF6KxmYicXJq2xjpHTmIrXt_8H-MOOShTAKndjlLYyFmOYMnsGf2eDocKGooXszvdQr46v385AcwLdNcPZi80Yx4XGcRzDlezQwq-RJoWlm_0zQWHOUKjNQd8PuBW12NGesaIDFvwVOom9Vc7F9k2TkoVV4Z8sJWnbs");var L=function(e){var t=e.setTracks,a=e.userId,o=e.authToken,c=e.forceUpdate,s=Object(n.useState)({}),u=Object(i.a)(s,2),p=u[0],d=u[1],m=Object(n.useState)(null),f=Object(i.a)(m,2),h=(f[0],f[1]);Object(n.useEffect)((function(){(function(){var e=Object(B.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/Event2Genre.json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a),d(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var b=r.a.useContext(l),g=function(){var e=Object(B.a)(N.a.mark((function e(t,a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("playlistid is ".concat(t)),console.log("track recs from genre seeds:\n",a),n=a.map((function(e){return"spotify:track:".concat(e.id)})),r="https://api.spotify.com/v1/playlists/".concat(t,"/tracks"),e.next=6,fetch(r,{method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({uris:n})}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(B.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.spotify.com/v1/users/".concat(a,"/playlists"),console.log("authToken in createNewPlaylist:",o),console.log("playlistTitle in createNewPlaylist:",t),e.next=5,fetch(n,{method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({name:t})}).then((function(e){return e.json()})).then((function(e){return console.log(e),h(e.id),console.log(e.id),e.id}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(B.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.join(","),n="https://api.spotify.com/v1/recommendations?seed_genres="+a,e.next=4,fetch(n,{method:"GET",headers:{Authorization:"Bearer "+o}}).then((function(e){return e.json()})).then((function(e){return e.tracks}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(z.a,{"data-testid":"dialog-container",open:!!b&&b.open[0],onClose:function(){return b.open[1](!1)},"aria-labelledby":"form-dialog-title"},r.a.createElement(U.a,{"data-testid":"title",id:"form-dialog-title"},"Generate your playlist in one step"),r.a.createElement(A.a,null,r.a.createElement(R.a,{"data-testid":"dialog-text"},"To generate your playlist, please enter the title of your playlist and the type of your event."),r.a.createElement(I.a,{autoFocus:!0,margin:"dense",label:"Playlist Title",onChange:function(e){b.playlistTitle[1](e.target.value)},fullWidth:!0,"data-testid":"input","data-cy":"input"}),r.a.createElement(K,null)),r.a.createElement(G.a,null,r.a.createElement(S.a,{"data-testid":"generate-bn","data-cy":"generate-bn",variant:"contained",color:"primary",onClick:function(){return function(){console.log("handleGenerate clicked"),console.log(b),b.open[1](!1);var e=b.playlistTitle[0],a=b.playlistEvents[0].reduce((function(e,t){return e.concat(p[t])}),[]),n=Array.from(new Set(a));console.log(n),v(n).then((function(a){y(e,a).then((function(e){t(a),g(e,a).then((function(e){c()}))}))}))}()}},"Generate"))))},X=a(159),Q=a(11),Y=a(160),V=a(67),q=a.n(V);a(100);q.a.initializeApp({apiKey:"AIzaSyBbCXkK69d0bTOb4E5WBdgg9mbchMNzFak",authDomain:"ci-test-11a9a.firebaseapp.com",databaseURL:"https://ci-test-11a9a.firebaseio.com",projectId:"ci-test-11a9a",storageBucket:"ci-test-11a9a.appspot.com",messagingSenderId:"281561229382",appId:"1:281561229382:web:8d9f2af7cbd523ef750247"});var H=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.location.hash="";var M=Object(X.a)((function(e){return{root:{flexGrow:1},formControl:{marginTop:e.spacing(3)},button:{margin:e.spacing(1),backgroundColor:e.palette.background.paper},grow:{flexGrow:1},title:Object(s.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(s.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Q.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Q.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"200"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(s.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{maxWidth:800}),playList:{margin:e.spacing(10,0,0,0),width:"100%",backgroundColor:e.palette.background.paper,position:"relative"},inline:{display:"inline"}}})),Z=function(){var e=M(),t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],s=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1];return console.log(a),function(){console.log("Force updating..."),r((function(e){return!e}))}}(),u=Object(n.useState)(),p=Object(i.a)(u,2),d=p[0],m=p[1],f=Object(n.useState)(),h=Object(i.a)(f,2),b=h[0],g=h[1],y=Object(n.useState)(),j=Object(i.a)(y,2),O=j[0],E=j[1],k=Object(n.useState)(),w=Object(i.a)(k,2),x=w[0],S=w[1],C=r.a.useState("Untitled Playlist"),P=Object(i.a)(C,2),N=P[0],B=P[1],I=r.a.useState([]),z=Object(i.a)(I,2),G=z[0],A=z[1],R=r.a.useState(!0),U=Object(i.a)(R,2),W={playlistTitle:[N,B],playlistEvents:[G,A],open:[U[0],U[1]]};return Object(n.useEffect)((function(){var e=H.access_token;e&&(m(e),console.log(e)),c(o),e&&fetch("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:"Bearer "+e}}).then((function(e){return e.json()})).then((function(e){console.log(e),g(e.images[0].url),E(e.display_name),S(e.id)})).catch(console.log)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.Provider,{value:W},r.a.createElement(T,{token:d,username:O,profilePic:b,className:e.grow}),r.a.createElement(Y.a,{maxWidth:"md"},r.a.createElement(v,{tracks:o})),r.a.createElement(L,{setTracks:c,userId:x,authToken:d,forceUpdate:s})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,a){e.exports=a(103)},81:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.4eb170fb.chunk.js.map